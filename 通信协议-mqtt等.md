

[Android网络编程之--Socket编程](https://www.jianshu.com/p/fb4dfab4eec1)

- 基于TCP（传输控制协议）协议的Socket编程

  **面向连接、数据可靠，速度慢，有序的**

- UDP编程

  **不面向连接、数据不可靠、速度快、无序的**。

https://www.pianshen.com/article/5776820355/









**JAVA开发MQTT总结**: https://www.cnblogs.com/rain1024/p/12358023.html



Android 中MQTT协议的使用  http://www.tuansbook.com/newsinfo.php?id=451







**AMQP :** 约定了消息的格式和工作方式。

即Advanced Message Queuing Protocol，一个提供统一消息服务的应用层标准高级[消息](https://baike.baidu.com/item/消息/1619218)队列协议，是[应用层](https://baike.baidu.com/item/应用层/4329788)协议的一个开放标准，为面向消息的中间件设计。基于此协议的客户端与消息中间件可传递消息，并不受客户端/[中间件](https://baike.baidu.com/item/中间件/452240)不同产品，不同的开发语言等条件的限制。[Erlang](https://baike.baidu.com/item/Erlang)中的实现有[RabbitMQ](https://baike.baidu.com/item/RabbitMQ)等。

 在分布式的系统中，子系统之间 如果**使用socket连接进行通讯**，有很多问题需要解决。比如：
 1）信息的发送者和接受者如何维持这个连接，如果一方中断，这期间的数据如何防止丢失？
 2）如何降低发送者和接受者的耦合度？
 3）如何让优先级高的接受者先接到数据？
 4）如何做到load balance?均衡接受者的负载？
 5）如何将信息发送到相关的接收者，如果接受者订阅了不同的数据，如何正确的分发到接受者？
 6）如何做到可扩展，将通信模块发到集群上去。
 7）如何保证接受者接到了完整，正确或是有序的数据？ 

AMQP解决了这些问题。与此同时，基于AMQP实现的产品相比其他类似产品（AcitveMQ，Openfire）有着自己的特点。

| 产品           | 优点                                                 | 缺点                                                         |
| :------------- | :--------------------------------------------------- | :----------------------------------------------------------- |
| OpenFire(XMPP) | 1.成熟稳定2.适合做IM服务器                           | 1.消息可靠性无保障2.路由策略不灵活3.集群模式不完善4.协议太重 |
| ActiveMQ(JMS)  | 1.成熟稳定2.与Java契合度高                           | 1.路由策略不灵活2.集群模式不稳定                             |
| RabbitMQ(AMQP) | 1.成熟稳定2.路由策略灵活3.消息传输可靠4.集群方案成熟 | 1.配置多，学习和运维成本高                                   |

https://blog.csdn.net/qq_33314107/article/details/80172042

**4. AQMP 的应用场景**
AQMP是实现消息机制的一种协议，消息队列主要有以下几种应用场景：
**4.1 异步处理**
比如公司新入职一个员工，需要开通系统账号，有几件事情要做，开通系统账号，发短信通知用户，发邮件 给员工，在公司内部通讯系统中发送消息给员工。其中发短信，发邮件，发内部通讯系统消息，这三件事情可以串行也可以并行，并行的好处就是可以提高效率，这时可以应用MQ来实现并行。
**4.2 应用解耦**
在公司内部系统中，有人事系统，OA系统，财务系统，外围应用系统等等，当人事发生变动的时候（离职入职调岗），人事系统需要将这些变动通知给其他系统，这时只需人事系统发送一条消息，各个外围系统订阅该消息，就可得知人事变动，与实时服务调用相比，如果人事系统挂掉，各个外围系统不会受到影响，继续运行。
**4.3 流量缓冲**
在有些流量会瞬间暴增的场景下，如秒杀，为了防止流量突然增大而使得应用挂掉，可以引入MQ，将请求存入MQ中，如果超过了MQ的长度，就把请求丢弃掉，这样来限制流量。
**4.4 日志处理**
将消息队列引入到日志处理中，如kafka的应用，解决了大量日志的传输问题。日志客户端负责采集日志数据，并定期写入kafka队列，kafka负责接收，存储和转发日志，日志处理系统订阅并消费kafka中的日志数据。









物联网通信协议——比较-MQTT、 DDS、 AMQP、XMPP、 JMS、 REST、 CoAP：  https://www.cnblogs.com/saryli/p/9742709.html

 HTTP协议

HTTP协议是典型的CS通讯模式，由客户端主动发起连接，向服务器请求XML或JSON数据。该协议最早是为了适用web浏览器的上网浏览场景和设计的，目前在PC、手机、pad等终端上都应用广泛，但并不适用于物联网场景。在物联网场景中其有三大弊端：

- \1. 由于必须由设备主动向服务器发送数据，难以主动向设备推送数据。
- \2. 安全性不高。
- \3. 不同于用户交互终端如pc、手机，物联网场景中的设备多样化，对于运算和存储资源都十分受限的设备，http协议实现、XML/JSON数据格式的解析，都是不可能的任务。

   REST/HTTP（松耦合服务调用）

REST/HTTP其实是互联网中服务调用API封装风格，物联网中数据采集到物联网应用系统中，在物联网应用系统中，可以通过开放REST API的方式，把数据服务开放出去，被互联网中其他应用所调用。

适用范围：REST/HTTP主要为了简化互联网中的系统架构，快速实现客户端和服务器之间交互的松耦合，降低了客户端和服务器之间的交互延迟。因此适合在物联网的应用层面，通过REST开放物联网中资源，实现服务被其他应用所调用。

   CoAP协议

CoAP （Constrained Application Protocol），受限应用协议，应用于无线传感网中协议。

适用范围：CoAP是简化了HTTP协议的RESTful API，CoAP是6LowPAN协议栈中的应用层协议，它适用于在资源受限的通信的IP网络。

MQTT协议（低带宽）

MQTT （Message Queuing Telemetry Transport ），消息队列遥测传输，由IBM开发的即时通讯协议，相比来说比较适合物联网场景的通讯协议。MQTT协议采用发布/订阅模式，所有的物联网终端都通过TCP连接到云端，云端通过主题的方式管理各个设备关注的通讯内容，负责将设备与设备之间消息的转发。

适用范围：在低带宽、不可靠的网络下提供基于云平台的远程设备的数据传输和监控。

MQTT协议一般适用于设备数据采集到端（Device-》Server，Device-》Gateway），集中星型网络架构（hub-and-spoke），不适用设备与设备之间通信，设备控制能力弱，另外实时性较差，一般都在秒级。

DDS协议（高可靠性、实时）

 

DDS（Data Distribution Service for Real-Time Systems），面向实时系统的数据分布服务，这是大名鼎鼎的OMG组织提出的协议，其权威性应该能证明该协议的未来应用前景。

　　适用范围：分布式高可靠性、实时传输设备数据通信。目前DDS已经广泛应用于国防、民航、工业控制等领域。

点评：DDS很好地支持设备之间的数据分发和设备控制，设备和云端的数据传输，同时DDS的数据分发的实时效率非常高，能做到秒级内同时分发百万条消息到众多设备。DDS在服务质量（QoS）上提供非常多的保障途径，这也是它适用于国防军事、工业控制这些高可靠性、可安全性应用领域的原因。但这些应用都工作在有线网络下，在无线网络，特别是资源受限的情况下，没有见到过实施案例。

AMQP协议（互操作性）

 

AMQP（Advanced Message Queuing Protocol），先进消息队列协议，这是OASIS组织提出的，该组织曾提出OSLC（Open Source Lifecyle）标准，用于业务系统例如PLM，ERP，MES等进行数据交换。

　　适用范围：最早应用于金融系统之间的交易消息传递，在物联网应用中，主要适用于移动手持设备与后台数据中心的通信和分析。

XMPP协议（即时通信）

 

XMPP（Extensible Messaging and Presence Protocol）可扩展通讯和表示协议，XMPP的前身是Jabber，一个开源形式组织产生的网络即时通信协议。XMPP目前被IETF国际标准组织完成了标准化工作。

　　适用范围：即时通信的应用程序，还能用在网络管理、内容供稿、协同工具、档案共享、游戏、远端系统监控等。

点评：XMPP是基于XML的协议，由于其开放性和易用性，在互联网及时通讯应用中运用广泛。相对HTTP，XMPP在通讯的业务流程上是更适合物联网系统的，开发者不用花太多心思去解决设备通讯时的业务通讯流程，相对开发成本会更低。但是HTTP协议中的安全性以及计算资源消耗的硬伤并没有得到本质的解决。

JMS （Java Message Service）

Java消息服务（Java Message Service）应用程序接口，是一个Java平台中关于面向消息中间件（MOM）的API，用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。Java消息服务是一个与具体平台无关的API，绝大多数MOM提供商都对JMS提供支持。



Android接收RabbitMQ消息： https://my.oschina.net/u/4306011/blog/3531472