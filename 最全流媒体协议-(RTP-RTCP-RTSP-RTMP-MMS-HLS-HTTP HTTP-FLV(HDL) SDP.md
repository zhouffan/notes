https://blog.csdn.net/xiaomucgwlmx/article/details/102851352





**RTSP 和RTP的关系**
    RTP不象http和ftp可完整的下载整个影视文件，它是以固定的数据率在网络上发送数据，客户端也是按照这种速度观看影视文件，当影视画面播放过后，就不可以再重复播放，除非重新向服务器端要求数据。

   RTSP与RTP最大的区别在于：RTSP是一种双向实时数据传输协议，它允许客户端向服务器端发送请求，如回放、快进、倒退等操作。当然，RTSP可基于RTP来传送数据，还可以选择TCP、UDP、组播UDP等通道来发送数据，具有很好的扩展性。它时一种类似与http协议的网络应用层协议。目前碰到的一个应用：服务器端实时采集、编码并发送两路视频，客户端接收并显示两路视频。由于客户端不必对视频数据做任何回放、倒退等操作，可直接采用UDP+RTP+组播实现。

**RTSP和HTTP的比较**
     RTSP和HTTP所提供的的服务相同，知识RTSP是以音视频流的形式，HTTP以文本和图形的形式。
    不同之处主要表现在两个地：1，RTSP兼容的视频服务器必须维持会话状态，以将RTSP请求和流关联起来
        2，从本质上来说HTTP是一个不对称协议(客户端发出请求，服务器响应)，但在RTSP协议中客户端和服务器都可以发出请求
                                    ![img](https://img-blog.csdnimg.cn/201911010938113.png)

## http-flv、rtmp和hls直播的优缺点:

### A、三者的延迟性：

http-flv：低延迟，内容延迟可以做到2-5秒。
Rtmp：低延迟，内容延迟可以做到2-5秒。
Hls:：延迟较高。

### B、三者的易用性:

rtmp和http-flv：播放端安装率高。只要浏览器支持FlashPlayer就能非常简易的播放。

hls：最大的优点：HTML5可以直接打开播放；这个意味着可以把一个直播链接通过微信
等转发分享，不需要安装任何独立的APP，有浏览器即可。

### C、rtmp和http-flv比较：

(1) 穿墙：很多防火墙会墙掉RTMP，但是不会墙HTTP，因此HTTP FLV出现奇怪问题的概率很小。
(2) 调度：RTMP也有个302，可惜是播放器as中支持的，HTTP FLV流就支持302方便CDN纠正DNS的错误。
(3) 容错：SRS的HTTP FLV回源时可以回多个，和RTMP一样，可以支持多级热备。
(4) 简单：FLV是最简单的流媒体封装，HTTP是最广泛的协议，这两个组合在一起维护性更高，比RTMP简单多了。







| 协议         | httpflv                       | rtmp    | hls                           | dash                                      |
| ------------ | ----------------------------- | ------- | ----------------------------- | ----------------------------------------- |
| 传输方式     | http流                        | tcp流   | http                          | http                                      |
| 视频封装格式 | flv                           | flv tag | Ts文件                        | Mp4 3gp webm                              |
| 延时         | 低                            | 低      | 高                            | 高                                        |
| 数据分段     | 连续流                        | 连续流  | 切片文件                      | 切片文件                                  |
| Html5播放    | 可通过html5解封包播放(flv.js) | 不支持  | 可通过html5解封包播放(hls.js) | 如果dash文件列表是mp4webm文件，可直接播放 |



- RTMP（Real Time Messaging Protocol）是基于TCP的，由Adobe公司为Flash播放器和服务器之间音频、视频传输开发的开放协议。
- HLS（HTTP Live Streaming）是基于HTTP的，是Apple公司开放的音视频传输协议。
- HTTP FLV则是将RTMP封装在HTTP协议之上的，可以更好的穿透防火墙等。



**Http_flv & RTMP**

这两个协议实际上传输数据是一样的，**数据都是flv文件的tag**。http_flv是一个无限大的http流的文件，相比rtmp就只能直播，而rtmp还可以推流和更多的操作。但是http有个好处，就是是以80http通信的，穿透性强，而且rtmp是非开放协议。

这两个协议是如今直播平台主选的直播方式，主要原因就是延时极低。

将测试：RTMP延迟1s左右，HTTPFLV延迟1-2s左右，可用于对延迟要求比较苛刻的场景，但要注意兼容性，文章最后会说明HTTPFLV兼容性。



**ijkplayer**是一个基于FFmpeg的轻量级Android/iOS视频播放器。FFmpeg的是全球领先的多媒体框架，能够解码，编码， 转码，复用，解复用，流，过滤器和播放大部分的视频格式。它提供了录制、转换以及流化音视频的完整解决方案。它包含了非常先进的音频/视频编解码库libavcodec，为了保证高可移植性和编解码质量，libavcodec里很多code都是从头开发的。

 